{"ast":null,"code":"var _jsxFileName = \"/Users/Amy/Documents/neu/cs5610-webdev/wbdv-sp-20-astefani-final-project/wbdv-sp-20-astefani-final-project-client/src/components/SearchResultsComponent.js\";\nimport React from \"react\";\nimport RecipeResult from \"./RecipeResult\";\nimport { EDAMAM_API_KEY, EDAMAM_APP_ID } from \"../common/constants\";\nexport default class SearchResultsComponent extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      results: '',\n      count: 0\n    };\n  }\n\n  createCORSRequest(method, url) {\n    let xhr = new XMLHttpRequest();\n\n    if (\"withCredentials\" in xhr) {\n      // XHR for Chrome/Firefox/Opera/Safari.\n      xhr.open(method, url, true);\n    } else {\n      // CORS not supported.\n      xhr = null;\n    }\n\n    return xhr;\n  } // Make the actual CORS request.\n\n\n  makeCorsRequest(queryText) {\n    const url = \"https://api.edamam.com/search?q=\" + queryText + \"&app_id=\" + EDAMAM_APP_ID + '&app_key=' + EDAMAM_API_KEY;\n    const xhr = this.createCORSRequest('GET', url);\n\n    if (!xhr) {\n      alert('CORS not supported');\n      return;\n    } // Response handlers.\n\n\n    xhr.onload = function () {\n      const text = xhr.responseText;\n      this.displayResults(JSON.parse(text));\n      console.table('results:', JSON.parse(text));\n    };\n\n    xhr.onerror = function () {\n      alert('Woops, there was an error making the request.');\n    };\n\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.send(queryText);\n  }\n\n  displayResults(jsonResponse) {\n    this.setState({\n      results: jsonResponse.hits,\n      count: jsonResponse.count\n    });\n  }\n\n  componentDidMount() {\n    this.makeCorsRequest(this.props.queryText);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"Search term: \", this.props.queryText), React.createElement(\"ul\", {\n      className: \"nav nav-tabs\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, console.log('this.state.results', this.state.results)));\n  }\n\n}","map":{"version":3,"sources":["/Users/Amy/Documents/neu/cs5610-webdev/wbdv-sp-20-astefani-final-project/wbdv-sp-20-astefani-final-project-client/src/components/SearchResultsComponent.js"],"names":["React","RecipeResult","EDAMAM_API_KEY","EDAMAM_APP_ID","SearchResultsComponent","Component","state","results","count","createCORSRequest","method","url","xhr","XMLHttpRequest","open","makeCorsRequest","queryText","alert","onload","text","responseText","displayResults","JSON","parse","console","table","onerror","setRequestHeader","send","jsonResponse","setState","hits","componentDidMount","props","render","log"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,SAAQC,cAAR,EAAwBC,aAAxB,QAA4C,qBAA5C;AAIA,eAAe,MAAMC,sBAAN,SAAqCJ,KAAK,CAACK,SAA3C,CAAqD;AAAA;AAAA;AAAA,SAElEC,KAFkE,GAE1D;AACNC,MAAAA,OAAO,EAAE,EADH;AAENC,MAAAA,KAAK,EAAE;AAFD,KAF0D;AAAA;;AAOlEC,EAAAA,iBAAiB,CAACC,MAAD,EAASC,GAAT,EAAc;AAC7B,QAAIC,GAAG,GAAG,IAAIC,cAAJ,EAAV;;AACA,QAAI,qBAAqBD,GAAzB,EAA8B;AAC5B;AACAA,MAAAA,GAAG,CAACE,IAAJ,CAASJ,MAAT,EAAiBC,GAAjB,EAAsB,IAAtB;AACD,KAHD,MAIK;AACH;AACAC,MAAAA,GAAG,GAAG,IAAN;AACD;;AACD,WAAOA,GAAP;AACD,GAlBiE,CAoBlE;;;AACAG,EAAAA,eAAe,CAACC,SAAD,EAAY;AAEzB,UAAML,GAAG,GAAG,qCAAqCK,SAArC,GAAiD,UAAjD,GACNb,aADM,GACU,WADV,GACwBD,cADpC;AAGA,UAAMU,GAAG,GAAG,KAAKH,iBAAL,CAAuB,KAAvB,EAA8BE,GAA9B,CAAZ;;AACA,QAAI,CAACC,GAAL,EAAU;AACRK,MAAAA,KAAK,CAAC,oBAAD,CAAL;AACA;AACD,KATwB,CAWzB;;;AACAL,IAAAA,GAAG,CAACM,MAAJ,GAAa,YAAY;AACvB,YAAMC,IAAI,GAAGP,GAAG,CAACQ,YAAjB;AACA,WAAKC,cAAL,CAAoBC,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAApB;AACAK,MAAAA,OAAO,CAACC,KAAR,CAAc,UAAd,EAA0BH,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAA1B;AACD,KAJD;;AAMAP,IAAAA,GAAG,CAACc,OAAJ,GAAc,YAAY;AACxBT,MAAAA,KAAK,CAAC,+CAAD,CAAL;AACD,KAFD;;AAKAL,IAAAA,GAAG,CAACe,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;AACAf,IAAAA,GAAG,CAACgB,IAAJ,CAASZ,SAAT;AACD;;AAGDK,EAAAA,cAAc,CAACQ,YAAD,EAAe;AAC3B,SAAKC,QAAL,CAAc;AACZvB,MAAAA,OAAO,EAAEsB,YAAY,CAACE,IADV;AAEZvB,MAAAA,KAAK,EAAEqB,YAAY,CAACrB;AAFR,KAAd;AAKD;;AAEDwB,EAAAA,iBAAiB,GAAG;AAClB,SAAKjB,eAAL,CAAqB,KAAKkB,KAAL,CAAWjB,SAAhC;AACD;;AAGDkB,EAAAA,MAAM,GAAG;AACP,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAkB,KAAKD,KAAL,CAAWjB,SAA7B,CADF,EAII;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGQ,OAAO,CAACW,GAAR,CAAY,oBAAZ,EAAkC,KAAK7B,KAAL,CAAWC,OAA7C,CADH,CAJJ,CADJ;AAiBD;;AAhFiE","sourcesContent":["import React from \"react\";\nimport RecipeResult from \"./RecipeResult\";\nimport {EDAMAM_API_KEY, EDAMAM_APP_ID} from \"../common/constants\";\n\n\n\nexport default class SearchResultsComponent extends React.Component {\n\n  state = {\n    results: '',\n    count: 0\n  };\n\n  createCORSRequest(method, url) {\n    let xhr = new XMLHttpRequest();\n    if (\"withCredentials\" in xhr) {\n      // XHR for Chrome/Firefox/Opera/Safari.\n      xhr.open(method, url, true);\n    }\n    else {\n      // CORS not supported.\n      xhr = null;\n    }\n    return xhr;\n  }\n\n  // Make the actual CORS request.\n  makeCorsRequest(queryText) {\n\n    const url = \"https://api.edamam.com/search?q=\" + queryText + \"&app_id=\"\n        + EDAMAM_APP_ID + '&app_key=' + EDAMAM_API_KEY;\n\n    const xhr = this.createCORSRequest('GET', url);\n    if (!xhr) {\n      alert('CORS not supported');\n      return;\n    }\n\n    // Response handlers.\n    xhr.onload = function () {\n      const text = xhr.responseText;\n      this.displayResults(JSON.parse(text));\n      console.table('results:', JSON.parse(text));\n    };\n\n    xhr.onerror = function () {\n      alert('Woops, there was an error making the request.');\n    };\n\n\n    xhr.setRequestHeader('Content-Type', 'application/json');\n    xhr.send(queryText);\n  }\n\n\n  displayResults(jsonResponse) {\n    this.setState({\n      results: jsonResponse.hits,\n      count: jsonResponse.count\n    });\n\n  }\n\n  componentDidMount() {\n    this.makeCorsRequest(this.props.queryText);\n  }\n\n\n  render() {\n    return (\n        <div>\n          <h2>Search term: {this.props.queryText}</h2>\n          {/*<p>{this.state.count} results found.</p>*/}\n\n            <ul className=\"nav nav-tabs\">\n              {console.log('this.state.results', this.state.results)}\n            {/*{this.state.results &&*/}\n            {/*  this.state.results.hits.map(hit, index => (*/}\n            {/*      <RecipeResult*/}\n            {/*          key={index}*/}\n            {/*          recipeData={hit}*/}\n            {/*      />*/}\n            {/*  ))}*/}\n          </ul>\n        </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}